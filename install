local user = "jamesrosstwo"
local repository = "cc"
local branch = "main"
local fileListUrl = "https://raw.githubusercontent.com/" .. user .. "/" .. repository .. "/" .. branch .. "/filelist.txt"

-- Function to download a file from GitHub
local function downloadFile(gitPath)
    local url = "https://raw.githubusercontent.com/" .. user .. "/" .. repository .. "/" .. branch .. "/" .. gitPath
    local filename = fs.getName(gitPath)

    if fs.exists(gitPath) then
        fs.delete(gitPath)
    end

    shell.run("wget", url, gitPath)
end

-- Download the file list
downloadFile("filelist.txt")

-- Read and process the file list
local file = fs.open("filelist.txt", "r")
if file then
    local line = file.readLine()
    while line do
        -- Ensure the directory exists
        local dir = line:match("(.+)/[^/]+%.lua$")
        if dir and not fs.exists(dir) then
            fs.makeDir(dir)
        end
        
        -- Download the file
        downloadFile(line)
        line = file.readLine()
    end
    file.close()
end

-- Clean up
fs.delete("filelist.txt")
